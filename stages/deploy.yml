 stage: deploy
  jobs: 
  - job: DeployJob
    steps: 
    - task: DotNetCoreCLI@2
      displayName: 'Install dotnetsay'
      inputs:
        command: custom
        custom: tool
        arguments: 'install -g dotnetsay'

    - task: DotNetCoreCLI@2
     inputs:
       command: publish
       publishWebProjects: True
       arguments: '--configuration $(BuildConfiguration) --output $(Build.ArtifactStagingDirectory)'
       zipAfterPublish: True

# this code takes all the files in $(Build.ArtifactStagingDirectory) and uploads them as an artifact of your build.
   - task: PublishPipelineArtifact@1
     inputs:
     targetPath: '$(Build.ArtifactStagingDirectory)' 
     artifactName: 'myWebsiteName'

   - task: DotNetCoreCLI@2
     inputs:
      command: publish
      publishWebProjects: True
      arguments: '--configuration $(BuildConfiguration) --output $(Build.ArtifactStagingDirectory)'
      zipAfterPublish: True   